{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/inherits/inherits_browser.js","bundle.js","node_modules/browserify/node_modules/process/browser.js","node_modules/browserify/node_modules/util/support/isBufferBrowser.js","node_modules/browserify/node_modules/util/util.js","src/block.coffee","src/chunk.coffee","src/input.coffee","src/main.coffee","src/player.coffee","src/scene.coffee","src/terrain.coffee","src/util.coffee","src/world.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","Object","create","ctor","superCtor","super_","prototype","constructor","value","enumerable","writable","configurable","TempCtor",2,"cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","setTimeout","len","run","clearTimeout","Item","fun","array","this","noop","process","nextTick","args","Array","arguments","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask",3,"arg","copy","fill","readUInt8",4,"global","inspect","obj","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","str","styleType","style","styles","arrayToHash","hash","forEach","val","idx","recurseTimes","isFunction","ret","isString","primitive","formatPrimitive","keys","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","RegExp","toString","isDate","Date","base","braces","isArray","toUTCString","output","formatArray","map","key","formatProperty","pop","reduceToSingleString","simple","JSON","stringify","replace","isNumber","isNull","hasOwnProperty","String","match","desc","getOwnPropertyDescriptor","get","set","split","line","join","substr","numLinesEst","reduce","prev","cur","ar","isNullOrUndefined","isSymbol","re","isObject","objectToString","d","isPrimitive","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","objects","x","Number","_","deprecate","fn","msg","deprecated","warned","throwDeprecation","traceDeprecation","console","trace","error","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","toUpperCase","test","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","undefined","null","string","date","regexp","isBuffer","log","inherits","origin","add","self","window","./support/isBuffer","_process",5,"TYPE","dirt","getColor","grass","THREE","Color","NONE","DIRT","GRASS","UNKNOWN","type",6,"BLOCK","Chunk","util","offsetx","offsety","offsetz","size","heightMin","heightRange","seed","rand","size2","heightMax","grid","Uint8Array","faceIndex","Int16Array","faceNum","generateMesh","faceTable","indexTable","gridify","rx","ry","rz","Math","floor","y","z","indexify","cx","cy","cz","iindexify","gridindexify","ref","getType","index","getFaceFromNormal","getInvFaceFromNormal","removeFace","face","rangeUpdater","attr","col","dest","fi","fii","ind","k","m","nor","pos","results","src","srcf","srci","srcnor","srcpos","taili","geometry","attributes","position","normal","color","addFace","c","desti","padding","tailb","tailv","ii","_this","p","randf","g","b","removeBlock","flag","ranges","updateCount","updateCount2","updateMin","updateMin2","offset","cnt","v","rmax","rmin","min","max","updateGeometry","drawcalls","count","addBlock","len1","ref1","computeBoundingSphere","getHeight","h","inflate","incline","current","faceMax","height","indices","normals","vertices","hmax","hmin","j","quality","noise","BufferGeometry","material","MeshLambertMaterial","vertexColors","VertexColors","Float32Array","Uint32Array","addAttribute","DynamicBufferAttribute","start","mesh","Mesh","./block","./util",7,"Input","item","hasProp","domElement","buttons","keydown","keyup","mapper","mouseEvent","ref2","ref3","document","listener","keyMap",8,13,16,17,18,27,32,37,38,39,40,"keycode","status","fromCharCode","toLowerCase","Bacon","fromEventTarget","keyCode","merge","filter","charCodeAt","onValue","MOUSE","LEFT","RIGHT","button","clientX","clientY","btn","cb","remove","onMouseDown","offMouseDown","onMouseUp","offMouseUp","transform","res","bind","onDoubleClick","offDoubleClick","active","md","mu","onMouseMove","offMouseMove","offAll","ref4","allremove","Main","Scene","transit","Detector","webgl","addGetWebGLMessage","renderer","WebGLRenderer","alpha","antialiasing","setSize","innerWidth","innerHeight","setClearColor","autoClear","sortObjects","$","append","gl","context","bufferType","data","range","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","bindBuffer","buffer","subarray","bufferSubData","BYTES_PER_ELEMENT","currentScene","input","stats","Stats","setMode","left","top","body","resize","width","camera","aspect","updateProjectionMatrix","animate","requestAnimationFrame","begin","clear","update","end","./scene",9,"Player","extend","child","parent","__super__","superClass","world","velocity","Vector3","canJump","canDoubleJump","doubleJumpFlag","gravity","mode","sneak","lookAt","ray","Raycaster","near","far","pickFlag","getCollider","collider","clone","getCell","getAroundColliders","axis","dirs","len2","result","tx","ty","tz","terrain","collides","colls","some","pick","attrs","direction","intersect","intersects","mouse","nx","ny","nz","v1","unproject","sub","normalize","intersectObjects","getMeshes","object","action","delta","eps","gravityUpdate","speed","abs","hitCheck","move","old","oldy","translateX","translateZ","translateY","Object3D","./input",10,"MainScene","World","clock","Clock","scene","PerspectiveCamera","render","fog","Fog","controls","PointerLockControls","getObject","syncCamera","pointerLockElement","enabled","requestPointerLock","getDelta","./world",11,"Terrain","ox","oz","div","chunkSize","chunk","chunkify","./chunk",12,"Utility","random","randRange","randArray","arr","perlin","ImprovedNoise","worldHeight","light","DirectionalLight","light2","HemisphereLight","player","rotation","./player","./terrain"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n",null,"// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","module.exports = do ->\r\n  \r\n  black = new THREE.Color 0x000000\r\n  white = new THREE.Color 0x111111\r\n  dirt  = new THREE.Color 0x8B4513\r\n  grass = new THREE.Color 0x228b22\r\n\r\n  TYPE = \r\n    NONE: 0\r\n    DIRT: 1 \r\n    GRASS: 2\r\n    UNKNOWN: 255\r\n    \r\n  getColor = (type)->\r\n    switch type\r\n      when TYPE.NONE then [black, black, black, black, black, black]\r\n      when TYPE.DIRT then [dirt, dirt, dirt, dirt, dirt, dirt]\r\n      when TYPE.GRASS then [grass, dirt, dirt, dirt, dirt, dirt]\r\n      else [white, white, white, white, white, white]\r\n\r\n  return { TYPE, getColor }\r\n","BLOCK = require './block'\r\nutil = require './util'\r\n\r\nclass Chunk \r\n  # constant\r\n  @dir: [[0,1,0], [-1,0,0], [1,0,0], [0,0,-1], [0,0,1], [0,-1,0]]\r\n  @faceTable: [\r\n    [ [0.0, 1.0, 0.0], [0.0, 1.0, 1.0], [1.0, 1.0, 0.0], [1.0, 1.0, 1.0] ],\r\n    [ [0.0, 1.0, 0.0], [0.0, 0.0, 0.0], [0.0, 1.0, 1.0], [0.0, 0.0, 1.0] ],\r\n    [ [1.0, 1.0, 1.0], [1.0, 0.0, 1.0], [1.0, 1.0, 0.0], [1.0, 0.0, 0.0] ],\r\n    [ [1.0, 1.0, 0.0], [1.0, 0.0, 0.0], [0.0, 1.0, 0.0], [0.0, 0.0, 0.0] ],\r\n    [ [0.0, 1.0, 1.0], [0.0, 0.0, 1.0], [1.0, 1.0, 1.0], [1.0, 0.0, 1.0] ],\r\n    [ [1.0, 0.0, 1.0], [0.0, 0.0, 1.0], [1.0, 0.0, 0.0], [0.0, 0.0, 0.0] ]\r\n  ]\r\n  @indexTable: [ [0, 1, 2], [2, 1, 3] ]\r\n\r\n  constructor: (@offsetx, @offsety, @offsetz, @size, @heightMin = 0, @heightRange = 128, @seed = undefined)->\r\n    @seed ?= util.rand 1000000\r\n    @size2 = @size * @size\r\n    @heightMax = @heightMin + @heightRange - 1\r\n    @grid = new Uint8Array @size2 * @heightRange\r\n    @faceIndex = new Int16Array @size2 * @heightRange * 6\r\n    @faceNum = 0\r\n    @generateMesh 32, 0.5, @heightMin, @heightMax\r\n\r\n    console.log \"offset: #{@offsetx} #{@offsetz}\"\r\n\r\n  gridify: (rx, ry, rz)->\r\n    x: Math.floor rx\r\n    y: Math.floor ry\r\n    z: Math.floor rz\r\n\r\n  indexify: (x, y, z)->\r\n    cx = x - @offsetx\r\n    cy = y - @offsety\r\n    cz = z - @offsetz\r\n    return -1 unless 0 <= cx < @size\r\n    return -1 unless 0 <= cz < @size\r\n    return -1 unless @heightMin <= cy <= @heightMax\r\n    cx + cz * @size + cy * @size2\r\n\r\n  iindexify: (i)->\r\n    x: i % @size + @offsetx\r\n    z: ((i % @size2) / @size + @offsetz) | 0\r\n    y: (i / @size2 + @offsety) | 0\r\n    \r\n  gridindexify: (rx, ry, rz)->\r\n    {x, y, z} = @gridify rx, ry, rz\r\n    @indexify x, y, z\r\n\r\n  getType: (x, y, z)->\r\n    index = @indexify x, y, z\r\n    return BLOCK.TYPE.NONE if index < 0\r\n    @grid[index]\r\n\r\n  getFaceFromNormal: (x, y, z)->\r\n    # y = 1 => 0\r\n    # x = -1 => 1\r\n    # x = 1 => 2\r\n    # z = -1 => 3\r\n    # z = 1 => 4\r\n    # y = -1 => 5\r\n    x * x * (3 + x) / 2 + y * y * (5 - y * 5) / 2 + z * z * (7 + z) / 2\r\n\r\n  getInvFaceFromNormal: (x, y, z)->\r\n    x * x * (3 - x) / 2 + y * y * (5 + y * 5) / 2 + z * z * (7 - z) / 2\r\n\r\n\r\n  removeFace: (index, face, rangeUpdater)->\r\n    attr = @geometry.attributes\r\n    pos = attr.position\r\n    nor = attr.normal\r\n    col = attr.color\r\n    ind = attr.index\r\n    \r\n    fii = index * 6 + face\r\n    fi = @faceIndex[fii]\r\n    return false if fi < 0\r\n    @faceIndex[fii] = -1\r\n\r\n    @faceNum--\r\n    taili = @faceNum * 6\r\n    return if fi is taili\r\n    \r\n    for i in [0, 1, 2, 5]\r\n      dest = ind.array[fi + i] * 3\r\n      src = ind.array[taili + i] * 3\r\n        \r\n      rangeUpdater dest, 3\r\n      \r\n      srcpos = []\r\n      srcnor = []\r\n      for k in [0...3]\r\n        srcpos.push pos.array[src + k]\r\n        pos.array[dest + k] = pos.array[src + k]\r\n        srcnor.push nor.array[src + k]\r\n        nor.array[dest + k] = nor.array[src + k]\r\n        col.array[dest + k] = col.array[src + k]\r\n\r\n      if i is 0\r\n        srci = @gridindexify srcpos[0], srcpos[1], srcpos[2]\r\n        srcf = @getFaceFromNormal srcnor[0], srcnor[1], srcnor[2]\r\n        @faceIndex[srci * 6 + srcf] = fi\r\n\r\n  addFace: (x, y, z, fi, type)->\r\n    attr = @geometry.attributes\r\n    pos = attr.position\r\n    nor = attr.normal\r\n    col = attr.color\r\n    ind = attr.index\r\n\r\n    taili = @faceNum * 6\r\n    tailb = ind.array[taili - 1] + 1\r\n    tailv = tailb * 3\r\n    \r\n    c = BLOCK.getColor(type)[fi]\r\n    padding = 0.00001\r\n\r\n    desti = @indexify x, y, z\r\n\r\n    @faceIndex[desti * 6 + fi] = taili\r\n    \r\n    Chunk.indexTable.forEach (i, ii)->\r\n      ind.array[ taili + ii*3     ] = i[0] + tailb\r\n      ind.array[ taili + ii*3 + 1 ] = i[1] + tailb\r\n      ind.array[ taili + ii*3 + 2 ] = i[2] + tailb\r\n\r\n    Chunk.faceTable[fi].forEach (p)=>\r\n      pos.array[ tailv     ] = p[0] + x + (if p[0] < 0.5 then padding else -padding)\r\n      pos.array[ tailv + 1 ] = p[1] + y + (if p[1] < 0.5 then padding else -padding)\r\n      pos.array[ tailv + 2 ] = p[2] + z + (if p[2] < 0.5 then padding else -padding)\r\n      \r\n      nor.array[ tailv     ] = Chunk.dir[fi][0]\r\n      nor.array[ tailv + 1 ] = Chunk.dir[fi][1]\r\n      nor.array[ tailv + 2 ] = Chunk.dir[fi][2]\r\n\r\n      col.array[ tailv     ]  = c.r + util.randf(c.r / 4.0)\r\n      col.array[ tailv + 1 ]  = c.g + util.randf(c.g / 4.0)\r\n      col.array[ tailv + 2 ]  = c.b + util.randf(c.b / 4.0)\r\n\r\n      tailv += 3\r\n\r\n    @faceNum++\r\n\r\n\r\n  removeBlock: (x, y, z)->\r\n    index = @indexify x, y, z\r\n    return if index < 0\r\n    @grid[index] = 0\r\n    \r\n    ranges = []\r\n    \r\n    # remove face\r\n    for fi in [0...6]\r\n      @removeFace index, fi, (offset, cnt)->\r\n        flag = true\r\n        _.forEach ranges, (v, i)->\r\n          return true if v[0] + v[1] < offset\r\n          return true if offset + cnt < v[0]\r\n          rmin = Math.min v[0], offset\r\n          rmax = Math.max v[0] + v[1], offset + cnt\r\n          ranges[i][0] = rmin\r\n          ranges[i][1] = rmax - rmin\r\n          return flag = false\r\n        if flag\r\n          ranges.push [offset, cnt]\r\n    \r\n    # add face\r\n    taili = @faceNum * 6\r\n    tailb = @geometry.attributes.index.array[taili - 1] + 1\r\n    tailv = tailb * 3\r\n    updateMin = tailv\r\n    updateCount = 0\r\n    updateMin2 = taili\r\n    updateCount2 = 0\r\n\r\n    for d in Chunk.dir\r\n      type = @getType x + d[0], y + d[1], z + d[2]\r\n      continue if type is 0\r\n      face = @getInvFaceFromNormal d[0], d[1], d[2]\r\n      \r\n      @addFace x + d[0], y + d[1], z + d[2], face, type\r\n\r\n      updateCount2 += 6\r\n      updateCount += 12\r\n\r\n    if updateCount > 0\r\n      flag = true\r\n      _.forEach ranges, (v, i)->\r\n        return true if v[0] + v[1] < updateMin\r\n        return true if updateMin + updateCount < v[0]\r\n        rmin = Math.min v[0], updateMin\r\n        rmax = Math.max v[0] + v[1], updateMin + updateCount\r\n        ranges[i][0] = rmin\r\n        ranges[i][1] = rmax - rmin\r\n        return flag = false\r\n      if flag\r\n        ranges.push [updateMin, updateCount]\r\n\r\n    if updateCount2 > 0\r\n      @updateGeometry 'index', [[updateMin2, updateCount2]]\r\n    \r\n    if ranges.length > 0\r\n      @updateGeometry 'position', ranges\r\n      @updateGeometry 'color', ranges\r\n      @updateGeometry 'normal', ranges\r\n\r\n    @geometry.drawcalls[0].count = @faceNum * 6\r\n  \r\n\r\n  addBlock: (x, y, z, type)->\r\n    index = @indexify x, y, z\r\n    return if index < 0\r\n    @grid[index] = type\r\n\r\n    ranges = []\r\n    \r\n    # remove face\r\n    for d in Chunk.dir\r\n      type = @getType x + d[0], y + d[1], z + d[2]\r\n      continue if type is 0\r\n      index = @indexify x + d[0], y + d[1], z + d[2]\r\n      face = @getInvFaceFromNormal d[0], d[1], d[2]\r\n\r\n      @removeFace index, face, (offset, cnt)->\r\n        flag = true\r\n        _.forEach ranges, (v, i)->\r\n          return true if v[0] + v[1] < offset\r\n          return true if offset + cnt < v[0]\r\n          rmin = Math.min v[0], offset\r\n          rmax = Math.max v[0] + v[1], offset + cnt\r\n          ranges[i][0] = rmin\r\n          ranges[i][1] = rmax - rmin\r\n          return flag = false\r\n        if flag\r\n          ranges.push [offset, cnt]\r\n    \r\n    # add face\r\n    taili = @faceNum * 6\r\n    tailb = @geometry.attributes.index.array[taili - 1] + 1\r\n    tailv = tailb * 3\r\n    updateMin = tailv\r\n    updateCount = 0\r\n    updateMin2 = taili\r\n    updateCount2 = 0\r\n\r\n    for d in Chunk.dir\r\n      type = @getType x + d[0], y + d[1], z + d[2]\r\n      continue if type isnt 0\r\n      face = @getFaceFromNormal d[0], d[1], d[2]\r\n\r\n      @addFace x, y, z, face, @getType(x, y, z)\r\n\r\n      updateCount2 += 6\r\n      updateCount += 12\r\n\r\n    if updateCount > 0\r\n      flag = true\r\n      _.forEach ranges, (v, i)->\r\n        return true if v[0] + v[1] < updateMin\r\n        return true if updateMin + updateCount < v[0]\r\n        rmin = Math.min v[0], updateMin\r\n        rmax = Math.max v[0] + v[1], updateMin + updateCount\r\n        ranges[i][0] = rmin\r\n        ranges[i][1] = rmax - rmin\r\n        return flag = false\r\n      if flag\r\n        ranges.push [updateMin, updateCount]\r\n\r\n    if updateCount2 > 0\r\n      @updateGeometry 'index', [[updateMin2, updateCount2]]\r\n    \r\n    if ranges.length > 0\r\n      @updateGeometry 'position', ranges\r\n      @updateGeometry 'color', ranges\r\n      @updateGeometry 'normal', ranges\r\n\r\n    @geometry.drawcalls[0].count = @faceNum * 6\r\n    # @geometry.computeBoundingBox()\r\n    @geometry.computeBoundingSphere()\r\n\r\n  updateGeometry: (key, ranges)->\r\n    THREE.updateGeometry @geometry, key, ranges\r\n  \r\n  getHeight: (x, z)->\r\n    for h in [@heightMax..@heightMin]\r\n      index = @indexify x, h, z\r\n      return h if @grid[index] isnt 0\r\n    return @heightMin\r\n\r\n  generateMesh: (inflate, incline, min, max)->\r\n    height = new Int16Array @size2\r\n    faceMax = @size2 * @heightMax * 3 / 2\r\n    console.log \"faceMax: #{faceMax}\"\r\n    \r\n    do =>\r\n      hmax = min\r\n      hmin = max\r\n      \r\n      for i in [0...@size2]\r\n        x = (i % @size + @offsetx + 2) / 2\r\n        z = (((i / @size + @offsetz) | 0) + 3) / 2\r\n        quality = 2  \r\n        for k in [0...4]\r\n          height[i] += util.noise(x / quality, z / quality, @seed) * quality\r\n          quality *= 4\r\n        height[i] = ~~Math.max min, Math.min(max, height[i] * incline + inflate)\r\n        for j in [0..height[i]]\r\n          if j is height[i]\r\n            @grid[i + j * @size2] = 2\r\n          else\r\n            @grid[i + j * @size2] = 1  \r\n        hmax = Math.max hmax, height[i]\r\n        hmin = Math.min hmin, height[i]\r\n        \r\n      console.log \"height: [#{hmin}, #{hmax}]\"\r\n\r\n    @geometry = new THREE.BufferGeometry\r\n    @material = new THREE.MeshLambertMaterial\r\n        vertexColors: THREE.VertexColors\r\n\r\n    vertices = new Float32Array faceMax * 4 * 3\r\n    indices = new Uint32Array faceMax * 2 * 3\r\n    normals = new Float32Array faceMax * 4 * 3\r\n    colors = new Float32Array faceMax * 4 * 3\r\n    #uvs = new Float32Array faceMax * 4 * 2 \r\n    current = 0\r\n    padding = 0.00001\r\n    \r\n    @grid.forEach (v, i)=>\r\n      if v is 0\r\n        @faceIndex[ i*6 + k] = -1 for k in [0...6]\r\n        return\r\n      {x, y, z} = @iindexify i\r\n      col = BLOCK.getColor @getType(x, y, z)\r\n      Chunk.dir.forEach (d, face)=>\r\n        type = @getType x + d[0], y + d[1], z + d[2]\r\n        if type is 0\r\n          @faceNum++\r\n          Chunk.faceTable[face].forEach (pos, o)=>\r\n            vertices[ current*12 + o*3 + 0 ] = pos[0] + x + (if pos[0] < 0.5 then padding else -padding)\r\n            vertices[ current*12 + o*3 + 1 ] = pos[1] + y + (if pos[1] < 0.5 then padding else -padding)\r\n            vertices[ current*12 + o*3 + 2 ] = pos[2] + z + (if pos[2] < 0.5 then padding else -padding)\r\n    \r\n            normals[ current*12 + o*3 + 0 ] = if face is 1 then -1.0 else (if face is 2 then 1.0 else 0.0)\r\n            normals[ current*12 + o*3 + 1 ] = if face is 5 then -1.0 else (if face is 0 then 1.0 else 0.0)\r\n            normals[ current*12 + o*3 + 2 ] = if face is 3 then -1.0 else (if face is 4 then 1.0 else 0.0)\r\n            \r\n            c = col[face]\r\n            colors[ current*12 + o*3 + 0 ] = c.r + util.randf(c.r / 4.0)\r\n            colors[ current*12 + o*3 + 1 ] = c.g + util.randf(c.g / 4.0)\r\n            colors[ current*12 + o*3 + 2 ] = c.b + util.randf(c.b / 4.0)\r\n            #uvs[ current*8 + o*2 + 0 ] = 0.0\r\n            #uvs[ current*8 + o*2 + 1 ] = 0.0\r\n\r\n          @faceIndex[ i*6 + face ] = current * 6\r\n\r\n          Chunk.indexTable.forEach (ind, o)->\r\n            indices[ current*6 + o*3 + 0 ] = ind[0] + current * 4\r\n            indices[ current*6 + o*3 + 1 ] = ind[1] + current * 4\r\n            indices[ current*6 + o*3 + 2 ] = ind[2] + current * 4\r\n            \r\n          current++\r\n        else\r\n          @faceIndex[ i*6 + face ] = -1\r\n\r\n    @geometry.addAttribute \"position\", new THREE.DynamicBufferAttribute(vertices, 3)\r\n    @geometry.addAttribute \"index\", new THREE.DynamicBufferAttribute(indices, 3)\r\n    @geometry.addAttribute \"normal\", new THREE.DynamicBufferAttribute(normals, 3)\r\n    @geometry.addAttribute \"color\", new THREE.DynamicBufferAttribute(colors, 3)\r\n    #@geometry.addAttribute \"uv\", new THREE.BufferAttribute(uvs, 2)\r\n\r\n    @geometry.computeBoundingSphere()\r\n\r\n    @geometry.drawcalls.push\r\n      start: 0\r\n      count: @faceNum * 2 * 3\r\n      index: 0\r\n\r\n    @mesh = new THREE.Mesh @geometry, @material\r\n\r\nmodule.exports = Chunk","class Input\r\n  constructor: (@domElement = document)->\r\n    @keys = {}\r\n    @listener = {}\r\n\r\n    @keyMap =\r\n      8: 'backspace'\r\n      13: 'enter'\r\n      16: 'shift'\r\n      17: 'ctrl'\r\n      18: 'alt'\r\n      27: 'esc'\r\n      32: 'space'\r\n      37: 'left'\r\n      38: 'up'\r\n      39: 'right'\r\n      40: 'down'\r\n\r\n    mapper = (keycode, status)=>\r\n      key: @keyMap[keycode] or String.fromCharCode(keycode).toLowerCase()\r\n      status: status\r\n\r\n    keydown = Bacon.fromEventTarget(@domElement, 'keydown').map (e)=> mapper.call @, e.keyCode, true\r\n    keyup = Bacon.fromEventTarget(@domElement, 'keyup').map (e)=> mapper.call @, e.keyCode, false\r\n    keydown.merge(keyup).filter (e)->\r\n      code = e.key.charCodeAt 0\r\n      47 < code < 58 or 96 < code < 123\r\n    .onValue (e)=>\r\n      @keys[e.key] = e.status\r\n      return unless e.status \r\n      @listener[e.key]?.forEach (v)-> do v\r\n\r\n    buttons = [THREE.MOUSE.LEFT, THREE.MOUSE.RIGHT]\r\n    \r\n    mouseEvent = (type)=>\r\n      listener = {}\r\n      buttons.forEach (e)-> listener[e] = []\r\n      Bacon.fromEventTarget @domElement, type\r\n        .filter (e)-> e.button in buttons\r\n        .onValue (e)-> listener[e.button].forEach (v)-> v e.clientX, e.clientY\r\n      [ \r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    [@onMouseDown, @offMouseDown] = mouseEvent 'mousedown'\r\n    [@onMouseUp, @offMouseUp] = mouseEvent 'mouseup'\r\n    [@onDoubleClick, @offDoubleClick] = _.transform mouseEvent('dblclick'), (res, e)-> res.push e.bind @, THREE.MOUSE.LEFT\r\n\r\n    [@onMouseMove, @offMouseMove] = do =>\r\n      listener = {}\r\n      active = {}\r\n      buttons.forEach (e)-> \r\n        active[e] = false\r\n        listener[e] = []\r\n      md = Bacon.fromEventTarget(@domElement, 'mousedown').map (e)-> [e.button, true]\r\n      mu = Bacon.fromEventTarget(@domElement, 'mouseup').map (e)-> [e.button, false]\r\n      md.merge(mu).onValue (e)-> active[e[0]] = e[1] if active[e[0]]?\r\n      Bacon.fromEventTarget(@domElement, 'mousemove').onValue (e)->\r\n        for own k, v of listener\r\n          v.forEach (u)-> u e.clientX, e.clientY if active[k] \r\n      [\r\n        (btn, cb)-> listener[btn]?.push cb,\r\n        (btn, cb)-> _.remove listener[btn], (v)-> if cb? then v is cb else true\r\n      ]\r\n\r\n    @offAll = =>\r\n      buttons.forEach (v)=>\r\n        @offMouseDown v\r\n        @offMouseUp v\r\n        @offMouseMove v\r\n      @offDoubleClick()\r\n      @off k for own k, v of @listener\r\n        \r\n\r\n  on: (key, cb)->\r\n    return @listener[key].push cb if @listener[key]\r\n    @listener[key] = [cb]\r\n\r\n  off: (key, cb = allremove)->\r\n    _.remove @listener[key], (v)-> v is cb\r\n\r\n\r\nmodule.exports = Input","'use strict'\r\n\r\nScene = require './scene'\r\n\r\n\r\nclass Main\r\n  constructor: -> \r\n    Detector.addGetWebGLMessage() unless Detector.webgl\r\n\r\n    @renderer = new THREE.WebGLRenderer\r\n        alpha: true\r\n        antialiasing: true\r\n    @renderer.setSize window.innerWidth, window.innerHeight\r\n    @renderer.setClearColor 0xa0d8ef, 1\r\n    @renderer.autoClear = false\r\n    @renderer.sortObjects = true\r\n    $('#world').append @renderer.domElement\r\n\r\n    THREE.gl = @renderer.context\r\n    THREE.updateGeometry = (geometry, key, ranges)->\r\n      attr = geometry.attributes[key]\r\n      bufferType = if key is 'index' then THREE.gl.ELEMENT_ARRAY_BUFFER else THREE.gl.ARRAY_BUFFER\r\n      THREE.gl.bindBuffer bufferType, attr.buffer\r\n      for range in ranges\r\n        offset = range[0]\r\n        count = range[1]\r\n        data = attr.array.subarray offset, offset + count\r\n        THREE.gl.bufferSubData bufferType, offset * attr.array.BYTES_PER_ELEMENT, data\r\n        data = null\r\n\r\n    @currentScene = undefined\r\n    transit = (s)=>\r\n      @currentScene.input.offAll()\r\n      @currentScene = s\r\n\r\n    @currentScene = new Scene @renderer, transit\r\n    \r\n    @stats = new Stats\r\n    @stats.setMode 0  # 0: fps, 1: ms, 2: mb\r\n    @stats.domElement.style.position = 'absolute'\r\n    @stats.domElement.style.left = '0px'\r\n    @stats.domElement.style.top = '0px'\r\n    $(document.body).append @stats.domElement\r\n\r\n    $(window).resize =>\r\n      width = window.innerWidth\r\n      height = window.innerHeight\r\n      @renderer.setSize width, height\r\n      @currentScene.camera.aspect = width / height\r\n      @currentScene.camera.updateProjectionMatrix()\r\n\r\n  animate: ->\r\n    requestAnimationFrame => do @animate\r\n    @stats.begin()\r\n    @renderer.clear()\r\n    @currentScene?.update()\r\n    @stats.end()\r\n\r\n\r\n$ -> do new Main().animate\r\n","Input = require './input'\r\n{inspect} = require 'util'\r\n\r\nclass Player extends THREE.Object3D\r\n  constructor: (@world, x, y, z)->\r\n    super()\r\n    @input = @world.input\r\n    @velocity = new THREE.Vector3 0, 0, 0\r\n    @canJump = false\r\n    @canDoubleJump = false\r\n    @doubleJumpFlag = false\r\n    @gravity = true\r\n    @height = 1.7\r\n    @width = 0.7\r\n    @mode = 1\r\n    @sneak = false\r\n    @position.set x, y, z\r\n    @lookAt new THREE.Vector3(x, 0, z)\r\n    @ray = new THREE.Raycaster\r\n    @ray.near = 0\r\n    @ray.far = 5\r\n    @pickFlag = false\r\n\r\n    @input.onMouseDown THREE.MOUSE.LEFT, =>\r\n      @pickFlag = true\r\n    @input.onMouseUp THREE.MOUSE.LEFT, =>\r\n      @pickFlag = false\r\n    \r\n    \r\n  getCollider: ->\r\n    @collider = [\r\n      @position.clone().add new THREE.Vector3(- @width / 2, -0.5, -@width / 2)\r\n      @position.clone().add new THREE.Vector3( @width / 2, @height - 0.5, @width / 2)\r\n    ]\r\n\r\n  getCell: ->\r\n    obj = \r\n      x: Math.floor @position.x\r\n      y: Math.floor @position.y\r\n      z: Math.floor @position.z\r\n\r\n  getAroundColliders: (axis, d)->\r\n    result = []\r\n    {x, y, z} = @getCell()\r\n    dirs = []\r\n    for a in [-1, 0, 1]\r\n      for b in [-1, 0, 1]\r\n        dirs.push [d, a, b] if axis is 'x'\r\n        dirs.push [a, d, b] if axis is 'y'\r\n        dirs.push [a, b, d] if axis is 'z'\r\n\r\n    for dir in dirs\r\n      tx = x + dir[0]\r\n      ty = y + dir[1]\r\n      tz = z + dir[2]\r\n      if @world.terrain.getType tx, ty, tz\r\n        result.push @world.terrain.getCollider(tx, ty, tz)\r\n\r\n    result\r\n\r\n  collides: (colls)->\r\n    p = @getCollider()\r\n    colls.some (c)->\r\n      return false if c[0].x > p[1].x\r\n      return false if c[0].y > p[1].y\r\n      return false if c[0].z > p[1].z\r\n      return false if c[1].x < p[0].x\r\n      return false if c[1].y < p[0].y\r\n      return false if c[1].z < p[0].z\r\n      true\r\n\r\n  pick: ->\r\n    origin = @position.clone().add new THREE.Vector3(0, @height - 0.75, 0)\r\n    mouse =  new THREE.Vector3 0, 0, 1\r\n    mouse.unproject @world.camera\r\n    direction = mouse.sub(origin).normalize()\r\n    @ray.set origin, direction \r\n    intersects = @ray.intersectObjects @world.terrain.getMeshes()\r\n    if intersects.length > 0\r\n      intersect = intersects[0]\r\n      face = intersect.face\r\n      attrs = intersect.object.geometry.attributes\r\n      pos = attrs.position\r\n      nor = attrs.normal\r\n      #fi = intersect.faceIndex\r\n      #fi = fi - if fi % 6 then 3 else 0\r\n      #console.log fi\r\n      \r\n      v1 = face.a * 3  \r\n      {x, y, z} = @world.terrain.gridify pos.array[v1], pos.array[v1+1], pos.array[v1+2]\r\n      if @input.keys['q']\r\n        @world.terrain.removeBlock x, y, z\r\n      else if @input.keys['e']\r\n        nx = nor.array[v1]\r\n        ny = nor.array[v1+1]\r\n        nz = nor.array[v1+2]\r\n\r\n        p = @getCell()\r\n        unless p.x is x + nx and p.z is z + nz and (p.y is y + ny or p.y + 1 is y + ny )\r\n          @world.terrain.addBlock x + nx, y + ny, z + nz, 2\r\n\r\n\r\n  action: (delta)->\r\n    eps = 0.001\r\n    gravityUpdate = false\r\n\r\n    @velocity.x -= @velocity.x * 3.0 * delta\r\n    @velocity.z -= @velocity.z * 3.0 * delta\r\n\r\n    @velocity.x = 0 if Math.abs(@velocity.x) < eps\r\n    @velocity.z = 0 if Math.abs(@velocity.z) < eps\r\n\r\n    if @gravity\r\n      if -@velocity.y * delta < 0.5\r\n        @velocity.y -= 9.8 * 2.7 * delta\r\n\r\n    for axis in ['x', 'y', 'z'] \r\n      if Math.abs(@velocity[axis]) * delta > 0.7\r\n        @velocity[axis] = 0.7 * (if @velocity[axis] < 0 then -1 else 1) / delta\r\n\r\n    \r\n    if @input.keys[\"shift\"]\r\n      @sneak = true if @canJump\r\n    else\r\n      gravityUpdate = true\r\n      @sneak = false\r\n    speed = if @sneak then 2.0 else 12.0\r\n\r\n    if @input.keys[\"w\"]\r\n      @velocity.z -= speed * delta\r\n      gravityUpdate = true\r\n    if @input.keys[\"a\"]\r\n      @velocity.x -= speed * delta\r\n      gravityUpdate = true\r\n    if @input.keys[\"s\"]\r\n      @velocity.z += speed * delta\r\n      gravityUpdate = true\r\n    if @input.keys[\"d\"]\r\n      @velocity.x += speed * delta\r\n      gravityUpdate = true\r\n    if @input.keys[\"space\"] and not @sneak\r\n      if @gravity\r\n        if @canDoubleJump\r\n          @velocity.y = 14.0\r\n          @velocity.x *= 3.0\r\n          @velocity.z *= 3.0\r\n          @canDoubleJump = false\r\n      else if @canJump\r\n        @velocity.y = 8.5\r\n        @canJump = false\r\n        @gravity = true\r\n        @doubleJumpFlag = true\r\n    else\r\n      if @doubleJumpFlag\r\n        @canDoubleJump = true\r\n        @doubleJumpFlag = false\r\n    if gravityUpdate\r\n      @gravity = true\r\n      @canJump = false\r\n\r\n  hitCheck: (delta)->\r\n    eps = 0.001\r\n    prev = @position.clone()\r\n    \r\n    @translateX @velocity.x * delta\r\n    @translateZ @velocity.z * delta\r\n    @translateY @velocity.y * delta\r\n\r\n    move = \r\n      x: @position.x - prev.x\r\n      z: @position.z - prev.z\r\n      y: @position.y - prev.y\r\n\r\n    @position.copy prev\r\n\r\n    if @sneak\r\n      for axis in ['x', 'z']\r\n        m = move[axis]\r\n        continue if Math.abs(m) < eps \r\n        old = @position[axis]\r\n        @position[axis] += m\r\n        colls = @getAroundColliders axis, (if m < 0 then -1 else 1)\r\n        if @collides colls\r\n          @position[axis] = old\r\n        else\r\n          continue if move.y > 0\r\n          oldy = @position.y\r\n          @position.y -= 0.5\r\n          colls = @getAroundColliders 'y', -1\r\n          unless @collides colls\r\n            @position[axis] = old\r\n          @position.y = oldy\r\n      \r\n      @velocity.y = 0\r\n      @gravity = false\r\n    else \r\n      for axis in ['x', 'z', 'y']\r\n        m = move[axis]\r\n        continue if Math.abs(m) < eps \r\n        old = @position[axis]\r\n        @position[axis] += m\r\n        colls = @getAroundColliders axis, (if m < 0 then -1 else 1)\r\n        if @collides colls\r\n          @position[axis] = old\r\n          if axis is 'y'\r\n            @velocity.y = 0\r\n            if m < 0\r\n              @canJump = true\r\n              @canDoubleJump = false\r\n              @doubleJumpFlag = false\r\n              @gravity = false\r\n\r\n  update: (delta)->\r\n    @pick() if @pickFlag\r\n    @action delta\r\n    @hitCheck delta\r\n    \r\n    \r\n        \r\nmodule.exports = Player\r\n","Input = require './input'\r\nWorld = require './world'\r\n\r\nclass Scene\r\n  constructor: (@renderer, @transit)->\r\n    @clock = new THREE.Clock\r\n    @input = new Input document.body\r\n    @scene = new THREE.Scene\r\n    width = window.innerWidth\r\n    height = window.innerHeight\r\n    @camera = new THREE.PerspectiveCamera 72, width / height, 0.1, 1000\r\n    #@camera = new THREE.OrthographicCamera width / - 2, width / 2, height / 2, height / - 2, 1, 1000 \r\n\r\n  update: ->\r\n    @renderer.render @scene, @camera\r\n\r\nclass MainScene extends Scene\r\n  constructor: (@renderer, @transit)-> \r\n    super @renderer, @transit\r\n    @scene.fog = new THREE.Fog 0xffffff, 100, 1000\r\n    \r\n    @controls = new THREE.PointerLockControls @camera\r\n    @scene.add @controls.getObject()\r\n    \r\n    @world = new World @scene, @input, @camera, 64\r\n    @world.syncCamera @controls\r\n    \r\n    @input.onMouseDown THREE.MOUSE.LEFT, =>\r\n      unless document.pointerLockElement\r\n        @controls.enabled = true\r\n        document.body.requestPointerLock()\r\n\r\n    ###@input.onDoubleClick =>\r\n      if document.pointerLockElement\r\n        @controls.enabled = false\r\n        document.exitPointerLock()###\r\n      #console.log \"transit OrbitScene\"\r\n      #@transit new OrbitScene @renderer, @transit\r\n    \r\n    #@input.onMouseDown THREE.MOUSE.RIGHT, =>\r\n    #  console.log \"transit PLScene\"\r\n    #  @transit new PLScene @renderer, @transit\r\n\r\n  update: ->\r\n    if @controls.enabled\r\n      delta = @clock.getDelta()\r\n      delta = Math.min(1.0/60, delta)\r\n      @world.update delta\r\n      @world.syncCamera @controls\r\n    super()\r\n    \r\nmodule.exports = MainScene","util = require './util'\r\nChunk = require './chunk'\r\n\r\nclass Terrain\r\n\r\n  @chunkSize: 16\r\n\r\n  constructor: (@size, @heightMin = 0, @heightRange = 128, @seed = undefined)->\r\n    @div = Math.floor @size / Terrain.chunkSize\r\n    console.log \"div: #{@div}\"\r\n    @size2 = @size * @size\r\n    @seed ?= util.rand 1000000\r\n    console.log \"seed: #{@seed}\"\r\n\r\n    @chunk = []\r\n    for oz in [0...@div]\r\n      for ox in [0...@div]\r\n        c =  new Chunk ox * Terrain.chunkSize, 0, oz * Terrain.chunkSize, Terrain.chunkSize, @heightMin, @heightRange, @seed\r\n        @chunk.push c\r\n\r\n  getMeshes: ->\r\n    ret = []\r\n    for c in @chunk\r\n      ret.push c.mesh\r\n    ret\r\n\r\n  chunkify: (x, y, z)->\r\n    cx = Math.floor x / Terrain.chunkSize\r\n    cz = Math.floor z / Terrain.chunkSize\r\n    return -1 unless 0 <= cx < @div\r\n    return -1 unless 0 <= cz < @div\r\n    cx + cz * @div\r\n\r\n  getHeight: (x, z)->\r\n    c = @chunkify x, 0, z\r\n    return @heightMin if c < 0\r\n    @chunk[c].getHeight x, z\r\n\r\n  gridify: (rx, ry, rz)->\r\n    x: Math.floor rx\r\n    y: Math.floor ry\r\n    z: Math.floor rz\r\n\r\n  getCollider: (x, y, z)->\r\n    [\r\n      new THREE.Vector3(x, y, z)\r\n      new THREE.Vector3(x + 1, y + 1, z + 1)\r\n    ]\r\n\r\n  getType: (x, y, z)->\r\n    c = @chunkify x, y, z\r\n    return 0 if c < 0\r\n    @chunk[c].getType x, y, z\r\n\r\n  addBlock: (x, y, z, type)->\r\n    c = @chunkify x, y, z\r\n    return if c < 0\r\n    @chunk[c].addBlock x, y, z, type\r\n  \r\n  removeBlock: (x, y, z)->\r\n    c = @chunkify x, y, z\r\n    return if c < 0\r\n    @chunk[c].removeBlock x, y, z\r\n\r\nmodule.exports = Terrain\r\n","class Utility\r\n  @rand = (n)->\r\n    Math.floor Math.random() * n\r\n\r\n  @randf = (n)->\r\n    Math.random() * n\r\n\r\n  @randRange = (min, max)->\r\n    Math.floor(Math.random() * (max - min + 1)) + min\r\n  \r\n  @randArray = (arr)->\r\n    arr[Math.floor Math.random() * arr.length]\r\n\r\n  @noise = do ->\r\n    perlin = new ImprovedNoise\r\n    (x, y, z)-> perlin.noise x, y, z\r\n\r\n\r\nmodule.exports = Utility","Terrain = require './terrain'\r\nPlayer = require './player'\r\n\r\nclass World\r\n  constructor: (@scene, @input, @camera, @size)->\r\n    worldHeight = 100\r\n    @terrain = new Terrain @size, 0, worldHeight\r\n    for c in @terrain.chunk \r\n      @scene.add c.mesh\r\n\r\n    @light = new THREE.DirectionalLight 0xffffff, 0.6\r\n    @light.position.set(0.5, 0.7, 0.3).normalize()\r\n    @scene.add @light\r\n\r\n    @light2 = new THREE.HemisphereLight 0xffffff, 0x111111, 0.6\r\n    @scene.add @light2\r\n    \r\n    #@scene.add new THREE.AmbientLight 0x404040\r\n\r\n    @player = new Player @, @size / 2, @terrain.getHeight(@size / 2, @size / 2) + worldHeight, @size / 2\r\n\r\n\r\n  update: (delta)->\r\n    @player.update delta\r\n\r\n  syncCamera: (controls)->\r\n    pos = @player.position.clone().add new THREE.Vector3(0, @player.height - 0.75, 0)\r\n    controls.getObject().position.copy pos \r\n    @player.rotation.copy controls.getObject().rotation\r\n\r\n\r\nmodule.exports = World\r\n"],"sourceRoot":"./src"}