var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,o,n;e=e||{},t=void 0!==e.parent?e.parent:document.body,o=void 0!==e.id?e.id:"oldie",n=Detector.getWebGLErrorMessage(),n.id=o,t.appendChild(n)}};"object"==typeof module&&(module.exports=Detector);var ImprovedNoise=function(){function e(e){return e*e*e*(e*(6*e-15)+10)}function t(e,t,o){return t+e*(o-t)}function o(e,t,o,n){var r=15&e,i=8>r?t:o,a=4>r?o:12==r||14==r?t:n;return(0==(1&r)?i:-i)+(0==(2&r)?a:-a)}for(var n=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],r=0;256>r;r++)n[256+r]=n[r];return{noise:function(r,i,a){var s=~~r,l=~~i,d=~~a,c=255&s,u=255&l,g=255&d;r-=s,i-=l,a-=d;var w=r-1,m=i-1,b=a-1,v=e(r),p=e(i),f=e(a),h=n[c]+u,y=n[h]+g,E=n[h+1]+g,x=n[c+1]+u,L=n[x]+g,G=n[x+1]+g;return t(f,t(p,t(v,o(n[y],r,i,a),o(n[L],w,i,a)),t(v,o(n[E],r,m,a),o(n[G],w,m,a))),t(p,t(v,o(n[y+1],r,i,b),o(n[L+1],w,i,a-1)),t(v,o(n[E+1],r,m,b),o(n[G+1],w,m,b))))}}};THREE.PointerLockControls=function(e){var t=this;e.rotation.set(0,0,0);var o=new THREE.Object3D;o.add(e);var n=new THREE.Object3D;n.position.y=10,n.add(o);var r=Math.PI/2,i=function(e){if(t.enabled!==!1){var i=e.movementX||e.mozMovementX||e.webkitMovementX||0,a=e.movementY||e.mozMovementY||e.webkitMovementY||0;n.rotation.y-=.002*i,o.rotation.x-=.002*a,o.rotation.x=Math.max(-r,Math.min(r,o.rotation.x))}};document.addEventListener("mousemove",i,!1),this.enabled=!1,this.getObject=function(){return n},this.getDirection=function(){var e=new THREE.Vector3(0,0,-1),t=new THREE.Euler(0,0,0,"YXZ");return function(r){return t.set(o.rotation.x,n.rotation.y,0),r.copy(e).applyEuler(t),r}}()};