!function t(n,e,r){function o(u,s){if(!e[u]){if(!n[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var h=e[u]={exports:{}};n[u][0].call(h.exports,function(t){var e=n[u][1][t];return o(e?e:t)},h,h.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,n,e){var r,o=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1},i={}.hasOwnProperty;r=function(){function t(t){var n,e,r,u,s,c,a,h,f;this.domElement=null!=t?t:document,this.keys={},this.listener={},this.keyMap={8:"backspace",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},u=function(t){return function(n,e){return{key:t.keyMap[n]||String.fromCharCode(n).toLowerCase(),status:e}}}(this),e=Bacon.fromEventTarget(this.domElement,"keydown").map(function(t){return function(n){return u.call(t,n.keyCode,!0)}}(this)),r=Bacon.fromEventTarget(this.domElement,"keyup").map(function(t){return function(n){return u.call(t,n.keyCode,!1)}}(this)),e.merge(r).filter(function(t){var n;return n=t.key.charCodeAt(0),n>47&&58>n||n>96&&123>n}).onValue(function(t){return function(n){var e;return t.keys[n.key]=n.status,n.status&&null!=(e=t.listener[n.key])?e.forEach(function(t){return t()}):void 0}}(this)),n=[THREE.MOUSE.LEFT,THREE.MOUSE.RIGHT],s=function(t){return function(e){var r;return r={},n.forEach(function(t){return r[t]=[]}),Bacon.fromEventTarget(t.domElement,e).filter(function(t){var e;return e=t.button,o.call(n,e)>=0}).onValue(function(t){return r[t.button].forEach(function(n){return n(t.clientX,t.clientY)})}),[function(t,n){var e;return null!=(e=r[t])?e.push(n):void 0},function(t,n){return _.remove(r[t],function(t){return null!=n?t===n:!0})}]}}(this),c=s("mousedown"),this.onMouseDown=c[0],this.offMouseDown=c[1],a=s("mouseup"),this.onMouseUp=a[0],this.offMouseUp=a[1],h=_.transform(s("dblclick"),function(t,n){return t.push(n.bind(this,THREE.MOUSE.LEFT))}),this.onDoubleClick=h[0],this.offDoubleClick=h[1],f=function(t){return function(){var e,r,o,u;return r={},e={},n.forEach(function(t){return e[t]=!1,r[t]=[]}),o=Bacon.fromEventTarget(t.domElement,"mousedown").map(function(t){return[t.button,!0]}),u=Bacon.fromEventTarget(t.domElement,"mouseup").map(function(t){return[t.button,!1]}),o.merge(u).onValue(function(t){return null!=e[t[0]]?e[t[0]]=t[1]:void 0}),Bacon.fromEventTarget(t.domElement,"mousemove").onValue(function(t){var n,o,u;o=[];for(n in r)i.call(r,n)&&(u=r[n],o.push(u.forEach(function(r){return e[n]?r(t.clientX,t.clientY):void 0})));return o}),[function(t,n){var e;return null!=(e=r[t])?e.push(n):void 0},function(t,n){return _.remove(r[t],function(t){return null!=n?t===n:!0})}]}}(this)(),this.onMouseMove=f[0],this.offMouseMove=f[1],this.offAll=function(t){return function(){var e,r,o,u;n.forEach(function(n){return t.offMouseDown(n),t.offMouseUp(n),t.offMouseMove(n)}),t.offDoubleClick(),r=t.listener,o=[];for(e in r)i.call(r,e)&&(u=r[e],o.push(t.off(e)));return o}}(this)}return t.prototype.on=function(t,n){return this.listener[t]?this.listener[t].push(n):this.listener[t]=[n]},t.prototype.off=function(t,n){return null==n&&(n=allremove),_.remove(this.listener[t],function(t){return t===n})},t}(),n.exports=r},{}],2:[function(t,n,e){"use strict";var r,o;o=t("./scene"),r=function(){function t(){var t;Detector.webgl||Detector.addGetWebGLMessage(),this.renderer=new THREE.WebGLRenderer({alpha:!0,antialiasing:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(10541295,1),this.renderer.autoClear=!1,this.renderer.sortObjects=!0,$("#world").append(this.renderer.domElement),this.currentScene=void 0,t=function(t){return function(n){return t.currentScene.input.offAll(),t.currentScene=n}}(this),this.currentScene=new o(this.renderer,t),this.stats=new Stats,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",$(document.body).append(this.stats.domElement),$(window).resize(function(t){return function(){var n,e;return e=window.innerWidth,n=window.innerHeight,t.renderer.setSize(e,n),t.currentScene.camera.aspect=e/n,t.currentScene.camera.updateProjectionMatrix()}}(this))}return t.prototype.animate=function(){var t;return requestAnimationFrame(function(t){return function(){return t.animate()}}(this)),this.stats.begin(),this.renderer.clear(),null!=(t=this.currentScene)&&t.update(),this.stats.end()},t}(),$(function(){return(new r).animate()})},{"./scene":3}],3:[function(t,n,e){var r,o,i,u,s,c=function(t,n){function e(){this.constructor=t}for(var r in n)a.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},a={}.hasOwnProperty;s=t("./util"),r=t("./input"),u=function(){function t(t,n){this.renderer=t,this.transit=n,this.clock=new THREE.Clock,this.input=new r(document.body),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(72,window.innerWidth/window.innerHeight,1,1e3)}return t.prototype.update=function(){return this.renderer.render(this.scene,this.camera)},t}(),o=function(t){function n(t,e){var r,o,i,u,c,a,h,f,l,p,E,d,m,v,w,S,y,M,T;this.renderer=t,this.transit=e,n.__super__.constructor.call(this,this.renderer,this.transit),this.camera.position.z=100,this.controls=new THREE.OrbitControls(this.camera),this.SIZE=64,E=-this.SIZE/2,p=this.SIZE/2,m=p-E,d=[],y=[],c=s.rand(1e3),a=[],h=-this.SIZE/2,f=this.SIZE/2,function(t){return function(){var n,e,r,o;return o=t.SIZE*t.SIZE,n=2,function(){e=[];for(var t=0;o>=0?o>t:t>o;o>=0?t++:t--)e.push(t);return e}.apply(this).forEach(function(t){return a.push(0)}),[0,1,2,3].forEach(function(e){var r;return function(){r=[];for(var t=0;o>=0?o>t:t>o;o>=0?t++:t--)r.push(t);return r}.apply(this).forEach(function(e){var r,o;return r=e%t.SIZE,o=e/t.SIZE|0,r/=2,o/=2,a[e]+=s.noise(r/n,o/n,c)*n}),n*=4}),function(){r=[];for(var t=0;o>=0?o>t:t>o;o>=0?t++:t--)r.push(t);return r}.apply(this).forEach(function(t){return a[t]<-this.SIZE/2&&console.log(a[t]=-this.SIZE/2),a[t]>this.SIZE/2&&console.log(a[t]=this.SIZE/2),a[t]*=.5,a[t]>h&&(h=a[t]),a[t]<f?f=a[t]:void 0})}}(this)(),function(){v=[];for(var t=0,n=this.SIZE;n>=0?n>t:t>n;n>=0?t++:t--)v.push(t);return v}.apply(this).forEach(function(t){return function(n){var e;return function(){e=[];for(var n=0,r=t.SIZE;r>=0?r>n:n>r;r>=0?n++:n--)e.push(n);return e}.apply(this).forEach(function(e){var r;return function(){r=[];for(var n=0,e=t.SIZE;e>=0?e>n:n>e;e>=0?n++:n--)r.push(n);return r}.apply(this).forEach(function(r){var o,i,u,s;return i=E+m*r/(t.SIZE-1),u=E+m*e/(t.SIZE-1),s=E+m*n/(t.SIZE-1),d.push(new THREE.Vector3(i,u,s)),o=a[n*t.SIZE+r]>u?a[n*t.SIZE+r]+t.SIZE/2:-1,y.push(o)})})}}(this)),S=this.SIZE*this.SIZE,T=new Array(12),u=new THREE.Geometry,M=0,function(){w=[];for(var t=0,n=this.SIZE-1;n>=0?n>t:t>n;n>=0?t++:t--)w.push(t);return w}.apply(this).forEach(function(t){return function(n){var e;return function(){e=[];for(var n=0,r=t.SIZE-1;r>=0?r>n:n>r;r>=0?n++:n--)e.push(n);return e}.apply(this).forEach(function(e){var r;return function(){r=[];for(var n=0,e=t.SIZE-1;e>=0?e>n:n>e;e>=0?n++:n--)r.push(n);return r}.apply(this).forEach(function(r){var o,i,c,a,h,f,l,p,E,m,v,w,H,R,g,I,b,Z,C,k,_,x,L,O,D,A;if(m=r+t.SIZE*e+S*n,v=m+1,g=m+t.SIZE,w=g+1,b=m+S,R=v+S,I=g+S,H=w+S,C=y[m],k=y[v],_=y[g],x=y[w],L=y[b],O=y[R],D=y[I],A=y[H],p=0,i=0,p>C&&(i|=1),p>k&&(i|=2),p>_&&(i|=8),p>x&&(i|=4),p>L&&(i|=16),p>O&&(i|=32),p>D&&(i|=128),p>A&&(i|=64),o=MARCH.edgeTable[i],0!==o){for(E=.5,1&o&&(E=(p-C)/(k-C),T[0]=d[m].clone().lerp(d[v],E)),2&o&&(E=(p-k)/(x-k),T[1]=d[v].clone().lerp(d[w],E)),4&o&&(E=(p-_)/(x-_),T[2]=d[g].clone().lerp(d[w],E)),8&o&&(E=(p-C)/(_-C),T[3]=d[m].clone().lerp(d[g],E)),16&o&&(E=(p-L)/(O-L),T[4]=d[b].clone().lerp(d[R],E)),32&o&&(E=(p-O)/(A-O),T[5]=d[R].clone().lerp(d[H],E)),64&o&&(E=(p-D)/(A-D),T[6]=d[I].clone().lerp(d[H],E)),128&o&&(E=(p-L)/(D-L),T[7]=d[b].clone().lerp(d[I],E)),256&o&&(E=(p-C)/(L-C),T[8]=d[m].clone().lerp(d[b],E)),512&o&&(E=(p-k)/(O-k),T[9]=d[v].clone().lerp(d[R],E)),1024&o&&(E=(p-x)/(A-x),T[10]=d[w].clone().lerp(d[H],E)),2048&o&&(E=(p-_)/(D-_),T[11]=d[g].clone().lerp(d[I],E)),a=0,i<<=4,Z=[];-1!==MARCH.triTable[i+a];)h=MARCH.triTable[i+a],f=MARCH.triTable[i+a+1],l=MARCH.triTable[i+a+2],u.vertices.push(T[h].clone()),u.vertices.push(T[f].clone()),u.vertices.push(T[l].clone()),c=new THREE.Face3(M,M+1,M+2),c.color=new THREE.Color(0,.5+s.randf(.5),0),u.faces.push(c),u.faceVertexUvs[0].push([new THREE.Vector2(0,0),new THREE.Vector2(0,1),new THREE.Vector2(1,1)]),M+=3,Z.push(a+=3);return Z}})})}}(this)),u.computeFaceNormals(),u.computeVertexNormals(),u.computeBoundingSphere(),l=new THREE.MeshLambertMaterial({vertexColors:THREE.VertexColors}),this.mesh=new THREE.Mesh(u,l),this.scene.add(this.mesh),r=new THREE.BoxGeometry(this.SIZE,h-f,this.SIZE),o=new THREE.MeshBasicMaterial({color:65535,wireframe:!0}),i=new THREE.Mesh(r,o),this.scene.add(i),i.position.y+=(h+f)/2,this.light=new THREE.DirectionalLight(16777215,1),this.light.position.set(.5,.7,.3).normalize(),this.scene.add(this.light),this.scene.add(new THREE.AmbientLight(2105376))}return c(n,t),n.prototype.update=function(){return this.controls.update(),n.__super__.update.call(this)},n}(u),i=function(t){function n(t,e){var r,i;this.renderer=t,this.transit=e,n.__super__.constructor.call(this,this.renderer,this.transit),this.camera.position.z=100,this.controls=new THREE.PointerLockControls(this.camera),this.scene.add(this.controls.getObject()),r=new THREE.BoxGeometry(20,20,20),i=new THREE.MeshBasicMaterial({color:16711680,wireframe:!0}),this.mesh=new THREE.Mesh(r,i),this.scene.add(this.mesh),this.input.onMouseDown(THREE.MOUSE.LEFT,function(t){return function(){return console.log("poyo"),t.controls.enabled=!0,document.pointerLockElement?void 0:document.body.requestPointerLock()}}(this)),this.input.onDoubleClick(function(t){return function(){return t.controls.enabled=!1,document.pointerLockElement&&document.exitPointerLock(),console.log("transit OrbitScene"),t.transit(new o(t.renderer,t.transit))}}(this))}return c(n,t),n}(u),n.exports=o},{"./input":1,"./util":4}],4:[function(t,n,e){var r;r=function(){function t(){}return t.rand=function(t){return Math.floor(Math.random()*t)},t.randf=function(t){return Math.random()*t},t.randRange=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},t.randArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.noise=function(){var t;return t=new ImprovedNoise,function(n,e,r){return t.noise(n,e,r)}}(),t}(),n.exports=r},{}]},{},[2]);
//# sourceMappingURL=bundle.js.map