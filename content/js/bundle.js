!function t(n,e,r){function o(u,s){if(!e[u]){if(!n[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var h=e[u]={exports:{}};n[u][0].call(h.exports,function(t){var e=n[u][1][t];return o(e?e:t)},h,h.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,n,e){var r,o=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1},i={}.hasOwnProperty;r=function(){function t(t){var n,e,r,u,s,c,a,h,f;this.domElement=null!=t?t:document,this.keys={},this.listener={},this.keyMap={8:"backspace",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},u=function(t){return function(n,e){return{key:t.keyMap[n]||String.fromCharCode(n).toLowerCase(),status:e}}}(this),e=Bacon.fromEventTarget(this.domElement,"keydown").map(function(t){return function(n){return u.call(t,n.keyCode,!0)}}(this)),r=Bacon.fromEventTarget(this.domElement,"keyup").map(function(t){return function(n){return u.call(t,n.keyCode,!1)}}(this)),e.merge(r).filter(function(t){var n;return n=t.key.charCodeAt(0),n>47&&58>n||n>96&&123>n}).onValue(function(t){return function(n){var e;return t.keys[n.key]=n.status,n.status&&null!=(e=t.listener[n.key])?e.forEach(function(t){return t()}):void 0}}(this)),n=[THREE.MOUSE.LEFT,THREE.MOUSE.RIGHT],s=function(t){return function(e){var r;return r={},n.forEach(function(t){return r[t]=[]}),Bacon.fromEventTarget(t.domElement,e).filter(function(t){var e;return e=t.button,o.call(n,e)>=0}).onValue(function(t){return r[t.button].forEach(function(n){return n(t.clientX,t.clientY)})}),[function(t,n){var e;return null!=(e=r[t])?e.push(n):void 0},function(t,n){return _.remove(r[t],function(t){return null!=n?t===n:!0})}]}}(this),c=s("mousedown"),this.onMouseDown=c[0],this.offMouseDown=c[1],a=s("mouseup"),this.onMouseUp=a[0],this.offMouseUp=a[1],h=_.transform(s("dblclick"),function(t,n){return t.push(n.bind(this,THREE.MOUSE.LEFT))}),this.onDoubleClick=h[0],this.offDoubleClick=h[1],f=function(t){return function(){var e,r,o,u;return r={},e={},n.forEach(function(t){return e[t]=!1,r[t]=[]}),o=Bacon.fromEventTarget(t.domElement,"mousedown").map(function(t){return[t.button,!0]}),u=Bacon.fromEventTarget(t.domElement,"mouseup").map(function(t){return[t.button,!1]}),o.merge(u).onValue(function(t){return null!=e[t[0]]?e[t[0]]=t[1]:void 0}),Bacon.fromEventTarget(t.domElement,"mousemove").onValue(function(t){var n,o,u;o=[];for(n in r)i.call(r,n)&&(u=r[n],o.push(u.forEach(function(r){return e[n]?r(t.clientX,t.clientY):void 0})));return o}),[function(t,n){var e;return null!=(e=r[t])?e.push(n):void 0},function(t,n){return _.remove(r[t],function(t){return null!=n?t===n:!0})}]}}(this)(),this.onMouseMove=f[0],this.offMouseMove=f[1],this.offAll=function(t){return function(){var e,r,o,u;n.forEach(function(n){return t.offMouseDown(n),t.offMouseUp(n),t.offMouseMove(n)}),t.offDoubleClick(),r=t.listener,o=[];for(e in r)i.call(r,e)&&(u=r[e],o.push(t.off(e)));return o}}(this)}return t.prototype.on=function(t,n){return this.listener[t]?this.listener[t].push(n):this.listener[t]=[n]},t.prototype.off=function(t,n){return null==n&&(n=allremove),_.remove(this.listener[t],function(t){return t===n})},t}(),n.exports=r},{}],2:[function(t,n,e){"use strict";var r,o,i;i=t("./util"),o=t("./scene"),r=function(){function t(){var t;Detector.webgl||Detector.addGetWebGLMessage(),this.renderer=new THREE.WebGLRenderer({alpha:!0,antialiasing:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(10541295,1),this.renderer.autoClear=!1,this.renderer.sortObjects=!0,$("#world").append(this.renderer.domElement),this.currentScene=void 0,t=function(t){return function(n){return t.currentScene.input.offAll(),t.currentScene=n}}(this),this.currentScene=new o(this.renderer,t),this.stats=new Stats,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.top="0px",$(document.body).append(this.stats.domElement),$(window).resize(function(t){return function(){var n,e;return e=window.innerWidth,n=window.innerHeight,t.renderer.setSize(e,n),t.currentScene.camera.aspect=e/n,t.currentScene.camera.updateProjectionMatrix()}}(this))}return t.prototype.animate=function(){var t;return requestAnimationFrame(function(t){return function(){return t.animate()}}(this)),this.stats.begin(),this.renderer.clear(),null!=(t=this.currentScene)&&t.update(),this.stats.end()},t}(),$(function(){return(new r).animate()})},{"./scene":3,"./util":4}],3:[function(t,n,e){var r,o,i,u,s=function(t,n){function e(){this.constructor=t}for(var r in n)c.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},c={}.hasOwnProperty;r=t("./input"),u=function(){function t(t,n){this.renderer=t,this.transit=n,this.clock=new THREE.Clock,this.input=new r(document.body),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(72,window.innerWidth/window.innerHeight,1,1e3)}return t.prototype.update=function(){return this.renderer.render(this.scene,this.camera)},t}(),o=function(t){function n(t,e){var r,o;this.renderer=t,this.transit=e,n.__super__.constructor.call(this,this.renderer,this.transit),this.camera.position.z=100,this.controls=new THREE.OrbitControls(this.camera),r=new THREE.BoxGeometry(20,20,20),o=new THREE.MeshPhongMaterial({color:16711680,wireframe:!1}),this.mesh=new THREE.Mesh(r,o),this.scene.add(this.mesh),this.light=new THREE.DirectionalLight(16777215,1),this.light.position.set(.5,.7,.3).normalize(),this.scene.add(this.light),this.input.onMouseDown(THREE.MOUSE.RIGHT,function(t){return function(){return console.log("transit PLScene"),t.transit(new i(t.renderer,t.transit))}}(this))}return s(n,t),n.prototype.update=function(){return this.controls.update(),n.__super__.update.call(this)},n}(u),i=function(t){function n(t,e){var r,i;this.renderer=t,this.transit=e,n.__super__.constructor.call(this,this.renderer,this.transit),this.camera.position.z=100,this.controls=new THREE.PointerLockControls(this.camera),this.scene.add(this.controls.getObject()),r=new THREE.BoxGeometry(20,20,20),i=new THREE.MeshBasicMaterial({color:16711680,wireframe:!0}),this.mesh=new THREE.Mesh(r,i),this.scene.add(this.mesh),this.input.onMouseDown(THREE.MOUSE.LEFT,function(t){return function(){return console.log("poyo"),t.controls.enabled=!0,document.pointerLockElement?void 0:document.body.requestPointerLock()}}(this)),this.input.onDoubleClick(function(t){return function(){return t.controls.enabled=!1,document.pointerLockElement&&document.exitPointerLock(),console.log("transit OrbitScene"),t.transit(new o(t.renderer,t.transit))}}(this))}return s(n,t),n}(u),n.exports=o},{"./input":1}],4:[function(t,n,e){var r;r=function(){function t(){}return t.rand=function(t){return Math.floor(Math.random()*t)},t.randRange=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},t.randArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.noise=function(){var t;return t=new ImprovedNoise,function(n,e,r){return t.noise(n,e,r)}}(),t}(),n.exports=r},{}]},{},[2]);
//# sourceMappingURL=bundle.js.map